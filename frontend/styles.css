document.addEventListener("DOMContentLoaded", () => {
  const confirmModal = document.getElementById("confirm-modal");
  const modalOverlay = confirmModal.querySelector(".modal-overlay");
  const modalYes = confirmModal.querySelector("#confirm-yes");
  const modalNo = confirmModal.querySelector("#confirm-no");
  let confirmCallback = null;

  // Função para abrir modal
  function openConfirmModal(callback) {
    confirmCallback = callback;
    confirmModal.classList.add("show");

    // Foco no botão "Não" para acessibilidade
    modalNo.focus();

    // ESC fecha modal
    document.addEventListener("keydown", handleEscClose);
  }

  // Função para fechar modal
  function closeConfirmModal() {
    confirmModal.classList.remove("show");
    document.removeEventListener("keydown", handleEscClose);
  }

  // Fecha modal com ESC
  function handleEscClose(e) {
    if (e.key === "Escape") {
      closeConfirmModal();
    }
  }

  // Clique no "Sim"
  modalYes.addEventListener("click", () => {
    if (confirmCallback) confirmCallback(true);
    closeConfirmModal();
  });

  // Clique no "Não"
  modalNo.addEventListener("click", () => {
    if (confirmCallback) confirmCallback(false);
    closeConfirmModal();
  });

  // Clique fora do conteúdo fecha modal
  modalOverlay.addEventListener("click", () => {
    closeConfirmModal();
  });

  // Exemplo de uso
  document.querySelectorAll(".remove-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      openConfirmModal(confirmed => {
        if (confirmed) {
          console.log("Item removido!");
        } else {
          console.log("Ação cancelada");
        }
      });
    });
  });
});
